@* @model AdminDashboardViewModel

@{
    ViewData["Title"] = "Admin Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<!-- Improved Summary Cards Row -->
<div class="row g-4 mt-3 mb-4 justify-content-center">
   
    <div class="col-md-2 col-sm-6">
        <div class="card text-white bg-primary text-center shadow-lg p-3">
            <div class="card-body">
                <h6 class="card-title">Total Pending</h6>
                <h4>@Model.TotalPendingBookings</h4>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-sm-6">
        <div class="card text-white bg-success text-center shadow-lg p-3">
            <div class="card-body">
                <h6 class="card-title">Total Approved</h6>
                <h4>@Model.TotalApprovedBookings</h4>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-sm-6">
        <div class="card text-white bg-danger text-center shadow-lg p-3">
            <div class="card-body">
                <h6 class="card-title">Total Rejected</h6>
                <h4>@Model.TotalRejectedBookings</h4>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-sm-6">
        <div class="card text-white bg-dark text-center shadow-lg p-3">
            <div class="card-body">
                <h6 class="card-title">Total Completed</h6>
                <h4>@Model.TotalCompletedBookings</h4>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-sm-6">
        <div class="card text-white bg-info text-center shadow-lg p-3">
            <div class="card-body">
                <h6 class="card-title">Total Services</h6>
                <h4>@Model.TotalServices</h4>
            </div>
        </div>
    </div>
</div>


    <!-- Charts -->
    <div class="row g-4">
        <div class="col-lg-6">
            <div class="card shadow-sm h-100 border-0">
                <div class="card-header bg-light fw-semibold text-primary text-center py-2">
                    Booking Status Distribution
                </div>
                <div class="card-body d-flex justify-content-center align-items-center" style="height: 320px;">
                    <canvas id="bookingStatusChart" width="280" height="280"></canvas>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card shadow-sm h-100 border-0">
                <div class="card-header bg-light fw-semibold text-primary text-center py-2">
                    Bookings & Services Overview
                </div>
                <div class="card-body d-flex justify-content-center align-items-center" style="height: 320px;">
                    <canvas id="overviewChart" width="280" height="280"></canvas>
                </div>
            </div>
        </div>
    </div>


<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    const bookingStatusData = {
        labels: ['Pending', 'Approved', 'Rejected', 'Completed'],
        datasets: [{
            data: [
    @Model.TotalPendingBookings,
    @Model.TotalApprovedBookings,
    @Model.TotalRejectedBookings,
    @Model.TotalCompletedBookings
            ],
            backgroundColor: ['#0d6efd', '#198754', '#dc3545', '#212529']
        }]
    };

    const overviewData = {
        labels: ['Pending', 'Approved', 'Rejected', 'Completed', 'Services'],
        datasets: [{
            label: 'Count',
            data: [
    @Model.TotalPendingBookings,
    @Model.TotalApprovedBookings,
    @Model.TotalRejectedBookings,
    @Model.TotalCompletedBookings,
    @Model.TotalServices
            ],
            backgroundColor: ['#0d6efd', '#198754', '#dc3545', '#212529', '#0dcaf0']
        }]
    };

    new Chart(document.getElementById('bookingStatusChart').getContext('2d'), {
        type: 'pie',
        data: bookingStatusData,
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'bottom' }
            }
        }
    });

    new Chart(document.getElementById('overviewChart').getContext('2d'), {
        type: 'bar',
        data: overviewData,
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: { stepSize: 1 }
                }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });
</script>

<!-- Gradient Styling -->
<style>
    .bg-gradient-primary {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    .bg-gradient-success {
        background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }

    .bg-gradient-danger {
        background: linear-gradient(135deg, #f43b47 0%, #453a94 100%);
    }

    .bg-gradient-dark {
        background: linear-gradient(135deg, #232526 0%, #414345 100%);
    }

    .bg-gradient-info {
        background: linear-gradient(135deg, #74ebd5 0%, #acb6e5 100%);
    }

    h6 {
        font-weight: 600;
    }

    h3 {
        font-size: 1.8rem;
        margin: 0;
    }
</style>
 *@


@* 
        @model AdminDashboardViewModel

@{
    ViewData["Title"] = "Admin Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<!-- Summary Cards -->
<div class="row g-4 mt-3 mb-4 justify-content-center text-white">
    <div class="col-md-2 col-sm-6">
        <div class="card bg-primary shadow-lg text-center p-3">
            <div class="card-body">
                <i class="bi bi-hourglass-split display-6 mb-2"></i>
                <h6>Total Pending</h6>
                <h4 class="counter" data-count="@Model.TotalPendingBookings">0</h4>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-sm-6">
        <div class="card bg-success shadow-lg text-center p-3">
            <div class="card-body">
                <i class="bi bi-check2-circle display-6 mb-2"></i>
                <h6>Total Approved</h6>
                <h4 class="counter" data-count="@Model.TotalApprovedBookings">0</h4>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-sm-6">
        <div class="card bg-danger shadow-lg text-center p-3">
            <div class="card-body">
                <i class="bi bi-x-circle display-6 mb-2"></i>
                <h6>Total Rejected</h6>
                <h4 class="counter" data-count="@Model.TotalRejectedBookings">0</h4>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-sm-6">
        <div class="card bg-dark shadow-lg text-center p-3">
            <div class="card-body">
                <i class="bi bi-clipboard-check display-6 mb-2"></i>
                <h6>Total Completed</h6>
                <h4 class="counter" data-count="@Model.TotalCompletedBookings">0</h4>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-sm-6">
        <div class="card bg-info shadow-lg text-center p-3">
            <div class="card-body">
                <i class="bi bi-tools display-6 mb-2"></i>
                <h6>Total Services</h6>
                <h4 class="counter" data-count="@Model.TotalServices">0</h4>
            </div>
        </div>
    </div>
</div>

<!-- Charts -->
<div class="row g-4">
    <div class="col-lg-6">
        <div class="card shadow-sm h-100 border-0">
            <div class="card-header bg-light fw-semibold text-primary text-center py-2">
                Booking Status Distribution
            </div>
            <div class="card-body d-flex justify-content-center align-items-center" style="height: 320px;">
                <canvas id="bookingStatusChart" width="280" height="280"></canvas>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card shadow-sm h-100 border-0">
            <div class="card-header bg-light fw-semibold text-primary text-center py-2">
                Booking & Services Overview
            </div>
            <div class="card-body d-flex justify-content-center align-items-center" style="height: 320px;">
                <canvas id="overviewChart" width="280" height="280"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.js"></script>

<script>
    // Animated counters
    document.querySelectorAll('.counter').forEach(counter => {
        const updateCount = () => {
            const target = +counter.getAttribute('data-count');
            const count = +counter.innerText;

            const speed = 20;
            const increment = Math.ceil(target / 40);

            if (count < target) {
                counter.innerText = count + increment;
                setTimeout(updateCount, speed);
            } else {
                counter.innerText = target;
            }
        };

        updateCount();
    });

    const bookingStatusData = {
        labels: ['Pending', 'Approved', 'Rejected', 'Completed'],
        datasets: [{
            data: [
    @Model.TotalPendingBookings,
    @Model.TotalApprovedBookings,
    @Model.TotalRejectedBookings,
    @Model.TotalCompletedBookings
            ],
            backgroundColor: ['#0d6efd', '#198754', '#dc3545', '#343a40']
        }]
    };

    const overviewData = {
        labels: ['Pending', 'Approved', 'Rejected', 'Completed', 'Services'],
        datasets: [{
            label: 'Counts',
            data: [
    @Model.TotalPendingBookings,
    @Model.TotalApprovedBookings,
    @Model.TotalRejectedBookings,
    @Model.TotalCompletedBookings,
    @Model.TotalServices
            ],
            backgroundColor: ['#0d6efd', '#198754', '#dc3545', '#343a40', '#0dcaf0']
        }]
    };

    new Chart(document.getElementById('bookingStatusChart'), {
        type: 'pie',
        data: bookingStatusData,
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'bottom' }
            }
        }
    });

    new Chart(document.getElementById('overviewChart'), {
        type: 'bar',
        data: overviewData,
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: { stepSize: 1 }
                }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });
</script>

<!-- Style Enhancements -->
<style>
    h6 {
        font-weight: 600;
    }

    h4 {
        font-weight: bold;
        font-size: 1.8rem;
    }

    .card-body i {
        color: white;
    }
</style>
 *@


            @model AdminDashboardViewModel

@{
    ViewData["Title"] = "Admin Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<!-- Summary Cards -->
<div class="row g-4 mt-4 mb-5">
    @{
        var cards = new[] {
    new { Title = "Pending", Value = Model.TotalPendingBookings, Color = "primary", Icon = "fa-hourglass-half" },
    new { Title = "Approved", Value = Model.TotalApprovedBookings, Color = "success", Icon = "fa-check-circle" },
    new { Title = "Rejected", Value = Model.TotalRejectedBookings, Color = "danger", Icon = "fa-times-circle" },
    new { Title = "Completed", Value = Model.TotalCompletedBookings, Color = "dark", Icon = "fa-calendar-check" },
    new { Title = "Services", Value = Model.TotalServices, Color = "info", Icon = "fa-concierge-bell" }
    };
    }

    @foreach (var card in cards)
    {
        <div class="col-md-2 col-sm-6">
            <div class="card text-white bg-@card.Color shadow-lg text-center">
                <div class="card-body">
                    <i class="fa @card.Icon fa-2x mb-2"></i>
                    <h6 class="card-title">@card.Title</h6>
                    <h3 class="counter" data-count="@card.Value">0</h3>
                </div>
            </div>
        </div>
    }
</div>

<!-- Charts -->
<div class="row g-4">
    <div class="col-lg-6">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-header bg-light text-primary text-center fw-bold">
                Booking Status Distribution
            </div>
            <div class="card-body d-flex justify-content-center align-items-center" style="height: 320px;">
                <canvas id="bookingStatusChart"></canvas>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-header bg-light text-primary text-center fw-bold">
                Bookings & Services Overview
            </div>
            <div class="card-body d-flex justify-content-center align-items-center" style="height: 320px;">
                <canvas id="overviewChart"></canvas>
            </div>
        </div>
    </div>
</div>

@* <!-- Recent Activity -->
<div class="row g-4 mt-4">
    <div class="col-lg-6">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-light text-primary fw-semibold">
                Recent Booking Activity
            </div>
            <div class="card-body p-0">
                <table class="table table-striped table-hover mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>User</th>
                            <th>Event</th>
                            <th>Status</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var booking in Model.RecentBookings)
                        {
                            <tr>
                                <td>@booking.UserName</td>
                                <td>@booking.EventName</td>
                                <td><span class="badge bg-@(booking.StatusColor)">@booking.Status</span></td>
                                <td>@booking.Date.ToString("dd MMM yyyy")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Top 5 Booked Venues -->
    <div class="col-lg-6">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-light text-primary fw-semibold">
                Top 5 Booked Venues
            </div>
            <ul class="list-group list-group-flush">
                @foreach (var venue in Model.TopBookedVenues)
                {
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        @venue.VenueName
                        <span class="badge bg-success rounded-pill">@venue.BookingCount</span>
                    </li>
                }
            </ul>
        </div>
    </div>
 *@</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const bookingStatusChart = new Chart(document.getElementById('bookingStatusChart'), {
        type: 'doughnut',
        data: {
            labels: ['Pending', 'Approved', 'Rejected', 'Completed'],
            datasets: [{
                data: [
    @Model.TotalPendingBookings,
    @Model.TotalApprovedBookings,
    @Model.TotalRejectedBookings,
    @Model.TotalCompletedBookings
                ],
                backgroundColor: ['#0d6efd', '#198754', '#dc3545', '#343a40'],
                borderWidth: 2
            }]
        },
        options: {
            plugins: { legend: { position: 'bottom' } },
            responsive: true
        }
    });

    const overviewChart = new Chart(document.getElementById('overviewChart'), {
        type: 'bar',
        data: {
            labels: ['Pending', 'Approved', 'Rejected', 'Completed', 'Services'],
            datasets: [{
                label: 'Total',
                backgroundColor: ['#0d6efd', '#198754', '#dc3545', '#343a40', '#0dcaf0'],
                data: [
    @Model.TotalPendingBookings,
    @Model.TotalApprovedBookings,
    @Model.TotalRejectedBookings,
    @Model.TotalCompletedBookings,
    @Model.TotalServices
                ],
                borderRadius: 8
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        stepSize: 1
                    }
                }
            }
        }
    });

    // Counter Animation
    const counters = document.querySelectorAll('.counter');
    counters.forEach(counter => {
        const update = () => {
            const target = +counter.getAttribute('data-count');
            const current = +counter.innerText;
            const increment = Math.ceil(target / 50);
            if (current < target) {
                counter.innerText = current + increment;
                setTimeout(update, 20);
            } else {
                counter.innerText = target;
            }
        };
        update();
    });
</script>
